<!DOCTYPE HTML>
<html>

<head>
	<link rel="bookmark"  type="image/x-icon"  href="/img/logo_miccall.png"/>
	 <link rel="shortcut icon" href="/img/logo_miccall.png">
	
			
    <title>
    Huladi - HuyLV's Blog
    </title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="/css/mic_main.css" />
    <link rel="stylesheet" href="/css/dropdownMenu.css" />
    
    <noscript>
        <link rel="stylesheet" href="/css/noscript.css" />
    </noscript>

			    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery.scrollex.min.js"></script>
    <script src="/js/jquery.scrolly.min.js"></script>
    <script src="/js/skel.min.js"></script>
    <script src="/js/util.js"></script>
    <script src="/js/main.js"></script>
	
</head>
    
		
<!-- Layouts -->



<!--  代码渲染  -->
<link rel="stylesheet" href="/css/prism_solarized.css" />
<link rel="stylesheet" href="/css/typo.css" />
<!-- 文章页 -->
<body class="is-loading">
<div id="fb-root"></div>
<script>(function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s);
        js.id = id;
        js.src = "//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.10&appId=116744252337283";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
    <!-- Wrapper 外包 s-->
    <div id="wrapper" class="fade-in">
        <!-- Intro 头部显示 s -->
        <!-- Intro 头部显示 e -->
        <!-- Header 头部logo start -->
        <header id="header">
    <a href="/" class="logo">Quay về trang chủ</a>
</header>
        <!-- Nav 导航条 start -->
        <nav id="nav" class="special" >
            <ul class="menu links" >
			<!-- Homepage  主页  --> 
			<li >
	            <a href="/" rel="nofollow">Home</a>
	        </li>
			<!-- categories_name  分类   --> 
	        
	        <li class="active">
	            <a href="#s1">posts</a>
	                    <ul class="submenu">
	                        <li>
	                        
	                    </ul>
	        </li>
	        
	        <!-- archives  归档   --> 
	        
	        
		        <!-- Pages 自定义   -->
		        
		        <li>
		            <a href="https://www.facebook.com/huylv.177" title="About me">
		                About me
		            </a>
		        </li>
		        


            </ul>
            <!-- icons 图标   -->
			<ul class="icons">
		            
		                <li><a href="https://github.com/huy-lv" class="icon fa-github"><span class="label">GitHub</span></a></li>
		            
		            
		                <li><a href="https://www.facebook.com/huylv.177" class="icon fa-facebook"><span class="label">Facebook</span></a></li>
		            
		            
		                <li><a href="https://www.instagram.com/huylv_" class="icon fa-instagram"><span class="label">Instagram</span></a></li>
		            
		            
		                <li><a href="https://twitter.com/huylv177#" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
		            
			</ul>
</nav>

        <div id="main" >
            <div class ="post_page_title_img" style="height: 25rem;background-image: url(../../../../resource/appium-tutorial/appium8.png);background-position: center; background-repeat:no-repeat; background-size:cover;-moz-background-size:cover;overflow:hidden;" >
                <a href="#" style="padding: 4rem 4rem 2rem 4rem ;"><h2 >Auto test ứng dụng React native với framework Appium</h2></a>
            </div>
            <!-- Post -->
            <div class="typo" style="padding: 3rem;">
                <h2 id="Appium-la-gi"><a href="#Appium-la-gi" class="headerlink" title="Appium là gì?"></a>Appium là gì?</h2><p>Ngày nay, phát triển ứng dụng di dộng (Android &amp; iOs) đang là một nghành công nghiệp cực kỳ phát triển. Số công ty và lập trình viên phát triển ứng dụng di động ngày càng lớn. Do đó việc kiểm thử cho các ứng dụng di động cũng cần được phát triển tương xứng. Appium là một trong những công cụ sinh ra để giải quyết vấn đề này.</p>
<p>Appium là một công cụ mã nguồn mở phục vụ cho việc kiểm thử ứng dụng native mobile (Android và iOs, kể cả ứng dụng Window), mobile web (trên Safari, Chrome) và hybrid app (là những app sử dụng webview để hiển thị, sử dụng framework Cordova, Ionic,…).</p>
<h2 id="Appium-dung-de-lam-gi"><a href="#Appium-dung-de-lam-gi" class="headerlink" title="Appium dùng để làm gì?"></a>Appium dùng để làm gì?</h2><p>Appium là một công cụ đa nền tảng, nó cho phép chúng ta viết ra các test case chạy được cả trên Android, iOs, Windows, sử dụng cùng API. Appium hỗ trợ khá nhiều ngôn ngữ để viết testcase:</p>
<ul>
<li>Ruby</li>
<li>Python</li>
<li>Java</li>
<li>JavaScript</li>
<li>PHP</li>
<li>C#</li>
<li>RobotFramework</li>
</ul>
<h2 id="Appium-voi-React-Native"><a href="#Appium-voi-React-Native" class="headerlink" title="Appium với React Native"></a>Appium với React Native</h2><p>Nếu các bạn đã tìm hiểu qua về auto test thì hẳn đã biết đến Selenium, nó cũng là một framework auto test cho các ứng dụng web. Tư tưởng hoạt động của Appium được xây dựng từ Selenium, nó cũng tìm các element bằng id (findElementById) và thực hiện hành động trên element đó. </p>
<p>Về mặt lý thuyết, Appium Server sẽ điều khiển một object AndroidDriver, có thể hiểu nó là 1 con bot thực hiện lại các hành động mà chúng ta định nghĩa. Tuy nhiên có một vấn đề khi chúng ta viết auto test với React Native: React Native hiện tại chưa hỗ trợ gán id cho element, do đó chúng ta phải sử dụng 1 thuộc tính khác của element để định danh: content-description</p>
<h2 id="Appium-dung-nhu-the-nao"><a href="#Appium-dung-nhu-the-nao" class="headerlink" title="Appium dùng như thế nào?"></a>Appium dùng như thế nào?</h2><p>Để tìm hiểu cách hoạt động của appium, chúng ta cùng xây dựng 1 ứng dụng nho nhỏ với React Native. Việc test cho Android native, iOs native cũng tương tự :D </p>
<h3 id="Ung-dung-don-gian-voi-React-native"><a href="#Ung-dung-don-gian-voi-React-native" class="headerlink" title="Ứng dụng đơn giản với React native"></a>Ứng dụng đơn giản với React native</h3><p>Do bài viết tập trung vào Appium nên mình sẽ đi nhanh qua phần xây dựng app React native. </p>
<ul>
<li>Cài nodejs nếu chưa có</li>
<li>Cài package create-react-native-app: <code>npm install -g create-react-native-app</code></li>
<li>Tạo project: <code>create-react-native-app DemoAppium</code></li>
<li>CD vào project: <code>cd DemoAppium</code></li>
<li>Chạy project: <code>npm start</code></li>
<li>Chỉnh sửa 1 chút code cho giống 1 màn hình đăng nhập :D</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> &#123;</div><div class="line">  Alert,</div><div class="line">  StyleSheet,</div><div class="line">  Text,</div><div class="line">  View,</div><div class="line">  TextInput,</div><div class="line">  TouchableOpacity</div><div class="line">&#125; <span class="keyword">from</span> <span class="string">'react-native'</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span>&lt;</span>&#123;&#125;&gt; &#123;</div><div class="line">  <span class="keyword">constructor</span>(props) &#123;</div><div class="line">    <span class="keyword">super</span>(props)</div><div class="line">    <span class="keyword">this</span>.state = &#123;</div><div class="line">      username: <span class="string">''</span>,</div><div class="line">      password: <span class="string">''</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  login() &#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.state.username === <span class="string">'admin'</span> &amp;&amp; <span class="keyword">this</span>.state.password === <span class="string">'admin'</span>) &#123;</div><div class="line">      Alert.alert(<span class="string">'Info'</span>, <span class="string">'Login success!'</span>)</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">      Alert.alert(<span class="string">'Error'</span>, <span class="string">'Wrong username or password!'</span>)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;View style=&#123;&#123; <span class="attr">flex</span>: <span class="number">1</span>, <span class="attr">paddingTop</span>: <span class="number">20</span> &#125;&#125;&gt;</div><div class="line">        &lt;Text style=&#123;&#123; <span class="attr">fontSize</span>: <span class="number">20</span>, <span class="attr">margin</span>: <span class="number">10</span> &#125;&#125;&gt;Username&lt;<span class="regexp">/Text&gt;</span></div><div class="line"><span class="regexp">        &lt;TextInput</span></div><div class="line"><span class="regexp">          underlineColorAndroid="transparent"</span></div><div class="line"><span class="regexp">          style=&#123;&#123;</span></div><div class="line"><span class="regexp">            borderRadius: 15,</span></div><div class="line"><span class="regexp">            borderWidth: 1,</span></div><div class="line"><span class="regexp">            backgroundColor: 'white',</span></div><div class="line"><span class="regexp">            borderColor: '#555',</span></div><div class="line"><span class="regexp">            padding: 5</span></div><div class="line"><span class="regexp">          &#125;&#125;</span></div><div class="line"><span class="regexp">          value=&#123;this.state.username&#125;</span></div><div class="line"><span class="regexp">          onChangeText=&#123;text =&gt; this.setState(&#123; username: text &#125;)&#125;</span></div><div class="line"><span class="regexp">          accessibilityLabel="textinput_username"</span></div><div class="line"><span class="regexp">          placeholder="enter username"</span></div><div class="line"><span class="regexp">        /</span>&gt;</div><div class="line">        &lt;Text style=&#123;&#123; <span class="attr">fontSize</span>: <span class="number">20</span>, <span class="attr">margin</span>: <span class="number">10</span> &#125;&#125;&gt;Password&lt;<span class="regexp">/Text&gt;</span></div><div class="line"><span class="regexp">        &lt;TextInput</span></div><div class="line"><span class="regexp">          underlineColorAndroid="transparent"</span></div><div class="line"><span class="regexp">          style=&#123;&#123;</span></div><div class="line"><span class="regexp">            borderRadius: 15,</span></div><div class="line"><span class="regexp">            borderWidth: 1,</span></div><div class="line"><span class="regexp">            backgroundColor: 'white',</span></div><div class="line"><span class="regexp">            borderColor: '#555',</span></div><div class="line"><span class="regexp">            padding: 5</span></div><div class="line"><span class="regexp">          &#125;&#125;</span></div><div class="line"><span class="regexp">          value=&#123;this.state.password&#125;</span></div><div class="line"><span class="regexp">          onChangeText=&#123;text =&gt; this.setState(&#123; password: text &#125;)&#125;</span></div><div class="line"><span class="regexp">          placeholder="enter password"</span></div><div class="line"><span class="regexp">          accessibilityLabel="textinput_password"</span></div><div class="line"><span class="regexp">          secureTextEntry=&#123;true&#125;</span></div><div class="line"><span class="regexp">        /</span>&gt;</div><div class="line">        &lt;View style=&#123;&#123; <span class="attr">flexDirection</span>: <span class="string">'row'</span>, <span class="attr">justifyContent</span>: <span class="string">'center'</span> &#125;&#125;&gt;</div><div class="line">          &lt;TouchableOpacity</div><div class="line">            onPress=&#123;() =&gt; <span class="keyword">this</span>.login()&#125;</div><div class="line">            accessibilityLabel=<span class="string">"button_login"</span></div><div class="line">          &gt;</div><div class="line">            &lt;Text</div><div class="line">              style=&#123;&#123;</div><div class="line">                margin: <span class="number">10</span>,</div><div class="line">                padding: <span class="number">10</span>,</div><div class="line">                fontSize: <span class="number">20</span>,</div><div class="line">                backgroundColor: <span class="string">'#999'</span>,</div><div class="line">                textAlign: <span class="string">'center'</span>,</div><div class="line">                color: <span class="string">'white'</span></div><div class="line">              &#125;&#125;</div><div class="line">            &gt;</div><div class="line">              Login</div><div class="line">            &lt;<span class="regexp">/Text&gt;</span></div><div class="line"><span class="regexp">          &lt;/</span>TouchableOpacity&gt;</div><div class="line">        &lt;<span class="regexp">/View&gt;</span></div><div class="line"><span class="regexp">      &lt;/</span>View&gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>Và để chạy app trên máy ảo hoặc điện thoại, chỉ cần cài app Expo trên điện thoại/máy ảo (qua Appstore hoặc GooglePlay) và scan QRcode hiển thị trên màn hình console.</li>
<li>Để ý một chút trong đoạn code này, mình đã thêm trường <code>accessibilityLabel</code> cho các TextInput và TouchableOpacity, nó sẽ phục vụ cho mục đích kiểm thử ở phần tới.<br><img src="../../../../resource/appium-tutorial/appium2.png" alt="alt text" title="Logo"></li>
</ul>
<h3 id="Cai-dat-server-appium"><a href="#Cai-dat-server-appium" class="headerlink" title="Cài đặt server appium"></a>Cài đặt server appium</h3><ul>
<li>Tải và cài đặt <a href="https://github.com/appium/appium-desktop/releases/latest" target="_blank" rel="external">appium desktop</a></li>
</ul>
<p><img src="../../../../resource/appium-tutorial/appium1.png" alt="alt text" title="Logo"></p>
<ul>
<li>Start server localhost với ip mặc định</li>
</ul>
<h3 id="Xac-dinh-cac-id-accessibilityId-cua-component-trong-app"><a href="#Xac-dinh-cac-id-accessibilityId-cua-component-trong-app" class="headerlink" title="Xác định các id/accessibilityId của component trong app"></a>Xác định các id/accessibilityId của component trong app</h3><p>Để con bot của chúng ta có thể tự động tìm đúng element (Text, View, TextInput, TouchableOpacity,…) để nhập text, click,… chúng ta sử dụng công cụ inspector có sẵn trong Appium Desktop.</p>
<p><img src="../../../../resource/appium-tutorial/appium6.png" alt="alt text" title="Logo"></p>
<p>Để khởi tạo inspector hợp lệ, chúng ta cần truyền các thông số này vào</p>
<ul>
<li>platformName: nền tảng của emulator: ANDROID/IOS</li>
<li>deviceName: tên thiết bị, bạn có thể xác định tên thiết bị qua câu lệnh cmd: <code>adb devices</code></li>
<li>appPackage: tên package của app, có dạng com.company.example, được khai báo trong androidmanifest.xml (project android) hoặc app.json (project react native)</li>
<li>appActivity: tên activity bạn muốn test, thông thường chúng ta nên chọn activity khởi đầu của app</li>
<li>noReset: chọn true nếu muốn reset app data sau mỗi lần khởi tạo<br>Một cách đơn giản hơn để xác định appPackage và appActivity: trên máy ảo mở app bạn cần test lên, mở cmd và chạy lệnh:</li>
</ul>
<p><code>adb shell</code><br><code>dumpsys window windows | grep -E &#39;mCurrentFocus&#39;</code></p>
<p><img src="../../../../resource/appium-tutorial/appium7.png" alt="alt text" title="Logo"></p>
<p>Sau đó bấm Start session<br><img src="../../../../resource/appium-tutorial/appium9.png" alt="alt text" title="Logo"></p>
<p>Cách sử dụng của inspector này cũng khá giống với inspector có sẵn của Chrome/Firefox<br><img src="../../../../resource/appium-tutorial/appium5.png" alt="alt text" title="Logo"></p>
<h3 id="Viet-test-case"><a href="#Viet-test-case" class="headerlink" title="Viết test case"></a>Viết test case</h3><p>Để demo về kiểm thử với appium, mình sẽ viết 2 case login đơn giản như sau:<br>Test case 1: Đăng nhập sai username hoặc password<br>Test case 2: Đăng nhập thành công<br>Appium hỗ trợ khá nhiều ngôn ngữ lập trình để viết test script, và ở đây mình chọn java để demo, và code trên Intellij.</p>
<h5 id="Tao-project-maven-co-ten-demoappiumtest"><a href="#Tao-project-maven-co-ten-demoappiumtest" class="headerlink" title="Tạo project maven có tên demoappiumtest"></a>Tạo project maven có tên demoappiumtest</h5><p><img src="../../../../resource/appium-tutorial/appium3.png" alt="alt text" title="Logo"></p>
<h5 id="Them-thu-vien-appium-java-vao-dependencies-cua-project-pom-xml"><a href="#Them-thu-vien-appium-java-vao-dependencies-cua-project-pom-xml" class="headerlink" title="Thêm thư viện appium java vào dependencies của project (pom.xml)"></a>Thêm thư viện appium java vào dependencies của project (pom.xml)</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;dependencies&gt;</div><div class="line">   &lt;dependency&gt;</div><div class="line">       &lt;groupId&gt;io.appium&lt;/groupId&gt;</div><div class="line">       &lt;artifactId&gt;java-client&lt;/artifactId&gt;</div><div class="line">       &lt;version&gt;3.2.0&lt;/version&gt;</div><div class="line">   &lt;/dependency&gt;</div><div class="line">   &lt;dependency&gt;</div><div class="line">       &lt;groupId&gt;org.testng&lt;/groupId&gt;</div><div class="line">       &lt;artifactId&gt;testng&lt;/artifactId&gt;</div><div class="line">       &lt;version&gt;6.9.7&lt;/version&gt;</div><div class="line">   &lt;/dependency&gt;</div><div class="line">&lt;/dependencies&gt;</div></pre></td></tr></table></figure>
<h5 id="Tao-class-LoginTest-java-voi-noi-dung"><a href="#Tao-class-LoginTest-java-voi-noi-dung" class="headerlink" title="Tạo class LoginTest.java với nội dung"></a>Tạo class LoginTest.java với nội dung</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginTest</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> AndroidDriver androidDriver;</div><div class="line">    <span class="meta">@BeforeMethod</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">beforeTest</span><span class="params">()</span> <span class="keyword">throws</span> MalformedURLException </span>&#123;</div><div class="line">        DesiredCapabilities cap = <span class="keyword">new</span> DesiredCapabilities();</div><div class="line">        cap.setCapability(<span class="string">"platformName"</span>, <span class="string">"ANDROID"</span>);</div><div class="line">        cap.setCapability(<span class="string">"deviceName"</span>, <span class="string">"emulator-5554"</span>);</div><div class="line">        cap.setCapability(<span class="string">"appPackage"</span>, <span class="string">"vn.huylv.demoappium"</span>);</div><div class="line">        cap.setCapability(<span class="string">"appActivity"</span>, <span class="string">"host.exp.exponent.experience.ShellAppActivity"</span>);</div><div class="line">        cap.setCapability(<span class="string">"noReset"</span>, <span class="keyword">true</span>);</div><div class="line">        androidDriver = <span class="keyword">new</span> AndroidDriver(<span class="keyword">new</span> URL(<span class="string">"http://localhost:4723/wd/hub"</span>),cap);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@AfterMethod</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterTest</span><span class="params">()</span></span>&#123;</div><div class="line">        androidDriver.quit();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Trong hàm beforeTest, chúng ta sẽ khởi tạo các thông số của máy ảo dùng để test và tên package của app cần test.</p>
<h6 id="Them-2-test-case-chinh-vao-ngay-sau-ham-beforeTest"><a href="#Them-2-test-case-chinh-vao-ngay-sau-ham-beforeTest" class="headerlink" title="Thêm 2 test case chính vào ngay sau hàm beforeTest"></a>Thêm 2 test case chính vào ngay sau hàm beforeTest</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginTest</span> </span>&#123;</div><div class="line">    ...</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">loginWithWrongUserNameAndPassword</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</div><div class="line">        Thread.sleep(<span class="number">1000</span>);</div><div class="line">        <span class="comment">//find textinput and send text</span></div><div class="line">        androidDriver.findElementByAccessibilityId(<span class="string">"textinput_username"</span>).sendKeys(<span class="string">"admin1"</span>);</div><div class="line">        androidDriver.findElementByAccessibilityId(<span class="string">"textinput_password"</span>).sendKeys(<span class="string">"admin1"</span>);</div><div class="line">        androidDriver.findElementByAccessibilityId(<span class="string">"button_login"</span>).click();</div><div class="line"></div><div class="line">        Thread.sleep(<span class="number">500</span>);</div><div class="line">        <span class="comment">//find alert message</span></div><div class="line">        assertEquals(androidDriver.findElementById(<span class="string">"android:id/message"</span>).getText(), <span class="string">"Wrong username or password!"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">loginWithCorrectUserNameAndPassword</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</div><div class="line">        Thread.sleep(<span class="number">1000</span>);</div><div class="line">        <span class="comment">//find textinput and send text</span></div><div class="line">        androidDriver.findElementByAccessibilityId(<span class="string">"textinput_username"</span>).sendKeys(<span class="string">"admin"</span>);</div><div class="line">        androidDriver.findElementByAccessibilityId(<span class="string">"textinput_password"</span>).sendKeys(<span class="string">"admin"</span>);</div><div class="line">        androidDriver.findElementByAccessibilityId(<span class="string">"button_login"</span>).click();</div><div class="line"></div><div class="line">        Thread.sleep(<span class="number">500</span>);</div><div class="line">        <span class="comment">//find alert message</span></div><div class="line">        assertEquals(androidDriver.findElementById(<span class="string">"android:id/message"</span>).getText(), <span class="string">"Login success"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Trong test case này, đầu tiên mình sẽ đợi 1s trước khi bắt đầu findElement, đơn giản là do app cần 1 chút thời gian để khởi động xong. Sau đó <code>findElement</code> bằng <code>accessibilityId</code> chính là <code>accessibilityLabel</code> mà chúng ta đã thêm trong code React native.<br>Khi inspect các element bằng công cụ inspector bên trên, nếu element đó có id thì dùng hàm <code>driver.findElementById()</code>, còn nếu element không có id, chúng ta sử dụng <code>driver.findElementByAccessibilityLabel()</code> với các param truyền vào chính là prop <code>accessibilityLabel</code> mà chúng ta đã truyền vào component trong react native.</p>
<h5 id="Bat-dau-chay-test-va-cam-nhan-ket-qua-3"><a href="#Bat-dau-chay-test-va-cam-nhan-ket-qua-3" class="headerlink" title="Bắt đầu chạy test và cảm nhận kết quả :3"></a>Bắt đầu chạy test và cảm nhận kết quả :3</h5><p><img src="../../../../resource/appium-tutorial/appium8.png" alt="alt text" title="Logo"></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/gHX9gV0dq4M" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>

<h3 id="Chot"><a href="#Chot" class="headerlink" title="Chốt"></a>Chốt</h3><p>Trên đây là một ví dụ cơ bản của mình về kiểm thử ứng dụng React native sử dụng framework Appium. Nâng cao về auto test của mobile app còn khá nhiều, mình sẽ hướng dẫn dần dần trong các bài tiếp theo :D</p>

            </div>

            <!-- Post Comments -->
            
    <!-- 使用 DISQUS -->
<div id="disqus-comment">
    <div id="disqus_thread"></div>

<script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'http://yoursite.com/2018/03/27/appium-tutorial1/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'http://yoursite.com/2018/03/27/appium-tutorial1/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
</script>

<script type="text/ls-javascript" id="disqus-thread-script">
    queue.offer(function() {
            (function() { // DON'T EDIT BELOW THIS LINE
                var d = document;
                var s = d.createElement('script');
                s.src = '//http-miccall-tech.disqus.com/embed.js';
                s.setAttribute('data-timestamp', + new Date());
                (d.head || d.body).appendChild(s);
            })();
        });
</script>

</div>

<style>
    #disqus-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>

            <div class="fb-comments" data-width="100%" data-numposts="5"></div>

        </div>
        <!-- Copyright 版权 start -->
                <div id="copyright">
            <ul>
                <li>&copy;Powered By <a href="https://hexo.io/zh-cn/" style="border-bottom: none;">hexo</a></li>
                <li>Design: <a href="http://miccall.tech " style="border-bottom: none;">miccall</a></li>
            </ul>
            
				<span id="busuanzi_container_site_pv"> 2018 </span> 
			
        </div>
    </div>


</body>



 	
</html>
